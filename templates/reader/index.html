$def with (new_materials, top_materials)
$var title: Kurssimateriaalit 0.1 - Index
$var show_login_form: True

<div class="container">

  <!-- HEADER -->
  <div class="hero-unit">
    <h1>Kurssimateriaalit 0.1<small>prototyyppi</small></h1>
    <p>Jaa muistiinpanosi, tiivistelm채t, mindmapit, mitk채lie. tjsp.</p>
    <br>
    <a href="/materials" class="btn btn-primary btn-large">Selaa materiaaleja &raquo;</a>
    <a href="/courses" class="btn btn-primary btn-large">Selaa kursseja &raquo;</a>
    <a href="/add" class="btn btn-primary btn-large">Lis채채 oma &raquo;</a>
  </div>

  
  <div class="row">
    <!-- NEW MATERIALS -->
    <div class="span4">
      <!-- NAVBAR -->
      <div class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="#">Uusimmat materiaalit</a>
          </div>
        </div>
      </div>
      <!-- ITEMS -->
      $for m in new_materials:
      <div class="material-listitem $loop.parity">
        <div class="left">
          <div class="course">
            <span class="label label-info">$m.code</span><a rel="tooltip" data-placement="right" title="$m.description" href="/download/$m.id"> $m.title</a>
            <small>.$m.type</small>
          </div>

          <div class="userinfo">
            <!-- <i class="icon-user"></i> -->
            <a href="#">$m.name</a> <small>$format_date(m.date_added) - 
            <a href="#" class="comments">Kommentteja: 12</a></small>
          </div>
        </div><!-- /.left -->

        <div class="right pull-right">
          <span class="badge badge-success pull-right">$m.points</span>
          <a href=""><i class="icon-plus"></i></a>
        </div>
      </div><!--/.material-listitem-->
    </div><!--/.span*-->


    <!-- TOP MATERIALS -->
    <div class="span4">
      <!-- NAVBAR -->
      <div class="navbar">
        <div class="navbar-inner">
          <div class="container">
            <a class="brand" href="#">Parhaat materiaalit</a>
          </div>
        </div>
      </div>
      <!-- ITEMS -->
      $for m in top_materials:
      <div class="material-listitem $loop.parity">
        <div class="left">
          <div class="course">
            <span class="label label-info">$m.code</span><a rel="tooltip" title="$m.description" href="/download/$m.id"> $m.title</a>
            <small>.$m.type</small>
          </div>

          <div class="userinfo">
            <!-- <i class="icon-user"></i> -->
            <a href="#">$m.name</a> <small>$format_date(m.date_added) - 
            <a href="#" class="comments">Kommentteja: 12</a></small>
          </div>
        </div><!-- /.left -->

        <div class="right pull-right">
          <span class="badge badge-success pull-right">$m.points</span>
          <a href="" data-id="$m.id"><i class="icon-plus"></i></a>
        </div>
      </div><!--/.material-listitem-->
    </div><!--/.span*-->

  </div><!--/.row-->
</div><!--/.container-->

<script> 
window.onload = function(){
    // Enable tooltips on course names:
    $$("[rel='tooltip']").tooltip();
    // Show plus-signs next to points displays when hovering:
    $$(".right>a").css("visibility", "hidden");
    $$(".material-listitem").hover(function(){
        $$(this).children(".right").children("a").css("visibility", "visible");
    }, function() {
        $$(this).children(".right").children("a").css("visibility", "hidden");
    });
    // Perform Ajax operation when liking a material:
    $$(".right>a").click(function () {
        var id = $$(this).attr("data-id"),
            clicked = this,
            points_display = $$(clicked).siblings(":first");
        $$.ajax({
            type: "GET",
            url: "/like",
            data: {id: id},
            success: function(data) {
                if (data=="") {
                    var points = parseInt($$(points_display).text()) + 1;
                    $$(points_display).text(points);
                } else {
                    $$(points_display).removeClass("badge-success").addClass("badge-important");
                }
            },
            dataType: "text"
        });
    return false;
    });
}
</script>